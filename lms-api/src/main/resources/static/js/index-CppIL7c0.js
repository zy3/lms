var V=(C,t,s)=>new Promise((a,f)=>{var c=r=>{try{d(s.next(r))}catch(e){f(e)}},y=r=>{try{d(s.throw(r))}catch(e){f(e)}},d=r=>r.done?a(r.value):Promise.resolve(r.value).then(c,y);d((s=s.apply(C,t)).next())});import{v as M,r as k,f as B,o as R,U as w,R as o,az as b,D as m,p as v,G as P,H as u,j as l,S as p,Q as h}from"./index-B4LUeTLg.js";import{s as U,m as j}from"./book-D9SslOf9.js";const q=P("h4",null,"参数设置",-1),D={style:{display:"flex","column-gap":"24px"}},G=M({name:"CustomParam",__name:"index",setup(C){let t=k(!1);const s=k();let a=B({borrowPeriod:0,maxBorrowCount:0});const f=B({borrowPeriod:[{required:!0,message:"请输入借阅期限",trigger:"blur"}],maxBorrowCount:[{required:!0,message:"请输入借阅上限",trigger:"blur"}]}),c=()=>{U().then(e=>{e.code===200?Object.assign(a,e.data):b(e.message,{type:"error"})})},y=()=>{t.value=!0},d=()=>{b("取消保存",{type:"warning"}),t.value=!1,c()},r=e=>V(this,null,function*(){e&&(yield e.validate((n,x)=>{n&&j(a).then(i=>{i.code===200?(b("保存成功",{type:"success"}),t.value=!1):b(i.message,{type:"error"})})}))});return R(()=>{c()}),(e,n)=>{const x=m("el-input"),i=m("el-form-item"),g=m("el-button"),F=m("el-form"),N=m("el-card");return v(),w(N,null,{header:o(()=>[q]),default:o(()=>[P("div",D,[u(F,{ref_key:"paramFormRef",ref:s,disabled:!l(t),style:{"max-width":"300px"},"label-position":"left","label-width":"90px",model:l(a),rules:l(t)?f:{},"status-icon":""},{default:o(()=>[u(i,{label:"借阅期限",prop:"borrowPeriod"},{default:o(()=>[u(x,{modelValue:l(a).borrowPeriod,"onUpdate:modelValue":n[0]||(n[0]=_=>l(a).borrowPeriod=_),modelModifiers:{number:!0},clearable:"",oninput:"value = value.replace(/[^\\d]/g, '')"},{suffix:o(()=>[p("天")]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"借阅上限",prop:"maxBorrowCount"},{default:o(()=>[u(x,{modelValue:l(a).maxBorrowCount,"onUpdate:modelValue":n[1]||(n[1]=_=>l(a).maxBorrowCount=_),modelModifiers:{number:!0},clearable:"",oninput:"value = value.replace(/[^\\d]/g, '')"},{suffix:o(()=>[p("本")]),_:1},8,["modelValue"])]),_:1}),l(t)?(v(),w(i,{key:0},{default:o(()=>[u(g,{type:"primary",onClick:n[2]||(n[2]=_=>r(s.value))},{default:o(()=>[p(" 保存 ")]),_:1}),u(g,{onClick:d},{default:o(()=>[p("取消")]),_:1})]),_:1})):h("",!0)]),_:1},8,["disabled","model","rules"]),l(t)?h("",!0):(v(),w(g,{key:0,type:"primary",plain:"",onClick:y},{default:o(()=>[p("编辑")]),_:1}))])]),_:1})}}});export{G as default};
